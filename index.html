<!doctype html>
<html lang="es" referrerpolicy="no-referrer">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Referrer-Policy" content="no-referrer" />
  <title>CMD Key • MirandaXmod</title>
  <meta name="description" content="Panel de key con temática CMD.">
  <!-- Icono / Favicon -->
  <link rel="icon" href="https://raw.githubusercontent.com/ZamasXmodder/LennonHubImage/main/logo.jpeg">
  <meta property="og:image" content="https://raw.githubusercontent.com/ZamasXmodder/LennonHubImage/main/logo.jpeg">
  <style>
    :root{
      --bg:#050505; --green:#00ff7f; --green-dim:#18a558; --glass:rgba(10,10,10,.55);
      --border:rgba(0,255,127,.5); --txt:#c8ffd8; --accent:#71ffa6;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 800px at 70% -10%, #0b1e12 0%, #06140c 40%, #050505 70%) fixed, var(--bg);
      color:var(--txt); font: 500 16px/1.45 ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
      overflow:hidden;
    }
    /* --- CMD background --- */
    .crt{
      position:fixed; inset:0; pointer-events:none;
      background:
        linear-gradient(rgba(255,255,255,.035), rgba(0,0,0,.06)) 0 0/100% 100%,
        repeating-linear-gradient(0deg, rgba(0,0,0,0) 0 2px, rgba(0,255,127,.035) 3px 3px);
      mix-blend-mode: screen; opacity:.9;
      animation: flicker 7s infinite steps(60, end);
    }
    @keyframes flicker{ 0%,100%{opacity:.9} 50%{opacity:.85} }
    .scanline{ position:fixed; left:0; right:0; height:2px; background:rgba(0,255,127,.25); top:-2px; filter:blur(.6px); animation: scan 6s linear infinite; pointer-events:none; }
    @keyframes scan{ 0%{top:-2px; opacity:.0} 10%{opacity:.6} 50%{opacity:.15} 100%{top:100%; opacity:0} }
    .matrix{ position:fixed; inset:0; padding:16px; color:#21ff97; opacity:.25; pointer-events:none; white-space:pre; overflow:hidden; mask-image: linear-gradient(#000, #0008 25%, #0002 60%, transparent); font-size:12px; line-height:1.2; }
    /* --- Center panel --- */
    .wrap{ position:relative; height:100%; width:100%; display:grid; place-items:center; padding:18px; }
    .card{ width:min(560px, 92vw); backdrop-filter: blur(12px) saturate(120%); background:var(--glass); border:1px solid var(--border); border-radius:20px; padding:20px 18px; box-shadow: 0 0 0 1px rgba(0,255,127,.15), 0 10px 40px rgba(0,0,0,.6), inset 0 0 24px rgba(0,255,127,.06); position:relative; isolation:isolate; }
    .glow{ position:absolute; inset:-2px; border-radius:inherit; z-index:-1; background: conic-gradient(from 180deg at 50% 50%, #0aff8a33, transparent 35%, #0aff8a33 70%, transparent 100%); filter: blur(16px); opacity:.35; animation: spin 16s linear infinite; }
    @keyframes spin{to{transform:rotate(1turn)}}

    .title{ display:flex; align-items:center; gap:10px; margin:4px 2px 14px; }
    .led{ width:10px; height:10px; border-radius:50%; background:#0aff8a; box-shadow:0 0 10px 2px #0aff8a; animation: led 1.6s ease-in-out infinite; }
    @keyframes led{0%,100%{opacity:.9}50%{opacity:.45}}
    .title h1{ margin:0; font-size: clamp(18px, 4vw, 22px); letter-spacing:.4px; color:#d1ffe8; text-shadow: 0 0 8px #00ff7f55, 0 0 18px #00ff7f22; }
    .logo{ width:28px; height:28px; border-radius:50%; object-fit:cover; flex:0 0 28px; box-shadow: 0 0 0 2px rgba(0,255,127,.35), 0 0 12px rgba(0,255,127,.25); border:1px solid rgba(0,255,127,.45); background:#0b1e12; }
    .subtitle{ margin:-8px 2px 10px; font-size:12px; color:#9dfcc4; opacity:.85 }
    .row{display:flex; gap:10px; align-items:center; margin:10px 0}
    .row.stretch{align-items:stretch}
    input.key{ flex:1; background:#07150e; color:#afffd3; border:1px solid #1b7d54; border-radius:12px; padding:12px 14px; outline:none; box-shadow: inset 0 0 0 1px rgba(0,255,127,.12); letter-spacing: .6px; user-select: none; pointer-events: none; }
    .btn{ appearance:none; border:1px solid #1fb774; background:#072716; color:#c9ffe2; padding:12px 14px; border-radius:12px; cursor:pointer; font-weight:700; transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease; box-shadow: 0 6px 20px rgba(0,255,127,.12), inset 0 0 0 1px rgba(0,255,127,.12); white-space:nowrap; }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 28px rgba(0,255,127,.18)}
    .btn:active{ transform: translateY(0)}
    .btn.secondary{ background:#0a2e1b; border-color:#2bd989}
    .hint{ font-size:12px; color:#aefccf; opacity:.9; margin-top:6px }
    .toast{ position:fixed; inset:auto 10px 10px auto; background:#0b2317; border:1px solid #1fb774; padding:10px 14px; border-radius:12px; color:#d6ffe9; font-size:14px; display:none; box-shadow: 0 10px 28px rgba(0,0,0,.5), 0 0 0 1px rgba(0,255,127,.12) }
    .kbd{ padding:.5px 6px; border:1px solid #2ad384; border-radius:6px; background:#06140c; font-size:12px; color:#b6ffd7 }
    @media (max-width:420px){ .row{flex-wrap:wrap} .btn{flex:1} }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- ambient terminal background -->
    <div class="matrix" id="matrix"></div>
    <div class="scanline"></div>
    <div class="crt"></div>

    <div class="card" role="dialog" aria-labelledby="h1">
      <div class="glow" aria-hidden="true"></div>
      <div class="title">
        <img class="logo" src="https://raw.githubusercontent.com/ZamasXmodder/LennonHubImage/main/logo.jpeg" alt="LennonHub logo" onerror="this.style.display='none'">
        <div class="led" aria-hidden="true"></div>
        <h1 id="h1">LennonXpremium • Key Console</h1>
      </div>
      <div class="subtitle">Theme: <span style="color:#71ffa6">CMD / Terminal</span> — Smart UI, low referrer</div>

      <div class="row stretch">
        <input id="key" class="key" type="text" inputmode="none" autocomplete="off" spellcheck="false" readonly placeholder="Press Generate to create key..." aria-label="Generated key" />
        <button id="gen" class="btn" type="button" aria-label="Generate key">Generate</button>
        <button id="copy" class="btn secondary" type="button" aria-label="Open link" style="display:none">Copy</button>
      </div>

      <div class="hint">La key es incopiable. Genera y luego usa <span class="kbd">Copy</span> para continuar.</div>
    </div>
  </div>

  <!-- inert anchor to open with no referrer -->
  <a id="robloxLink" href="https://www.roblox.com/share?code=699ac3f589290c479b279f3241162fb4&type=Server" rel="noreferrer noopener" referrerpolicy="no-referrer" target="_blank" style="display:none">roblox</a>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ===== CMD ambient text =====
    const m = document.getElementById('matrix');
    const rows = 28, cols = 110;
    const glyphs = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$#@%&*+-/=<>[]{}()';
    function rand(n){return Math.floor(Math.random()*n)}
    function line(){
      const len = rand(cols-20)+20;
      let s = '';
      const prefixes = ['C:\\>','D:\\>','~\\>','/>'];
      const cmd = ['ping 127.0.0.1','dir /b','whoami','ipconfig','node -v','git status','netstat -an'];
      const head = prefixes[rand(prefixes.length)] + ' ' + cmd[rand(cmd.length)];
      s += head.padEnd(len,' ') + '\n';
      for(let i=0;i<2;i++){
        let row=''; for(let j=0;j<len;j++) row += (Math.random()>.92?glyphs[rand(glyphs.length)]:' ');
        s+=row+'\n';
      }
      return s;
    }
    function tick(){ let out=''; for(let i=0;i<rows;i++) out += line(); m.textContent = out; }
    tick(); setInterval(tick, 1400);

    // ===== Key generator =====
    const keyInput = document.getElementById('key');
    const genBtn = document.getElementById('gen');
    const copyBtn = document.getElementById('copy');
    const toast = document.getElementById('toast');
    const robloxLink = document.getElementById('robloxLink');

    function generateKey(){
      const seg = (n)=>[...crypto.getRandomValues(new Uint8Array(n))].map(b=>'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'[b%36]).join('');
      const k = `LX-${seg(4)}-${seg(4)}-${seg(4)}`;
      keyInput.value = k;
      showToast('✅ Key generada (incopiable)');
      copyBtn.style.display = 'inline-block';
    }

    async function copyAndOpen(){
      const val = keyInput.value.trim();
      if(!val){ showToast('⚠️ Genera una key primero'); return; }
      showToast('Abriendo Roblox...');
      // Open with no referrer (helps avoid 400)
      robloxLink.click();
      const w = window.open(robloxLink.href, '_blank', 'noopener,noreferrer');
      if(!w){ setTimeout(()=>{ location.href = robloxLink.href; }, 500); }
    }

    function showToast(msg){
      toast.textContent = msg; toast.style.display='block'; toast.style.opacity='0';
      requestAnimationFrame(()=>{ toast.style.transition='opacity .25s ease, transform .25s ease'; toast.style.transform='translateY(-4px)'; toast.style.opacity='1'; });
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>{ toast.style.opacity='0'; toast.style.transform='translateY(0)'; setTimeout(()=>{ toast.style.display='none'; }, 250); }, 2200);
    }

    genBtn.addEventListener('click', generateKey);
    copyBtn.addEventListener('click', copyAndOpen);
    keyInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); generateKey(); } });
    // bloquear selección/copia de la key
    ['copy','cut','paste','contextmenu','selectstart','pointerdown'].forEach(ev=>{ keyInput.addEventListener(ev, e=>{ e.preventDefault(); return false; }); });

    // ===== Minimal self-tests (console) =====
    (function runTests(){
      try{
        const getDisplay = (el)=>getComputedStyle(el).display;
        console.log('[TEST] Copy hidden initially:', getDisplay(copyBtn)==='none');
        if(getDisplay(copyBtn)!=='none') throw new Error('Copy debe iniciar oculto');
        generateKey();
        console.log('[TEST] Key generated length > 0:', keyInput.value.length>0);
        if(!(keyInput.value.length>0)) throw new Error('Key no generada');
        console.log('[TEST] Copy visible after generate:', getDisplay(copyBtn)!=='none');
        if(getDisplay(copyBtn)==='none') throw new Error('Copy no se mostró');
        const cs = getComputedStyle(keyInput);
        console.log('[TEST] Input readonly & incopiable:', keyInput.readOnly && cs.userSelect==='none' && cs.pointerEvents==='none');
        // Try dispatching a copy event; should be prevented
        let prevented=false;
        const evt = new Event('copy', {bubbles:true, cancelable:true});
        keyInput.addEventListener('copy', e=>{ prevented=true; }, {once:true});
        const ok = keyInput.dispatchEvent(evt);
        console.log('[TEST] Copy prevented by listener:', prevented || ok===false);
        console.log('%c✔ Todos los tests básicos pasaron', 'color:#00ff7f');
      }catch(err){ console.error('Tests fallaron:', err); }
    })();
  </script>
</body>
</html>
